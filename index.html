<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Boom Heroes</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body, html { width: 100%; height: 100%; font-family: Arial, sans-serif; background: #222; overflow: hidden; }
    canvas { display: block; background: none; margin: auto; position: absolute; top: 0; bottom: 0; left: 0; right: 0; border: 5px solid #fff; }
    #ui { position: absolute; top: 10px; left: 10px; color: white; font-size: 18px; z-index: 10; }
    #gameOver {
      display: none;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      color: red;
      font-size: 36px;
      background: rgba(0, 0, 0, 0.7);
      padding: 20px;
      border: 2px solid white;
    }
  </style>
</head>
<body>
<div id="ui">Boom Heroes - 1–4 für Helden, Pfeile bewegen, Leertaste = Spezial, W/A/S/D = Schießen</div>
<div id="gameOver">GAME OVER - Seite neu laden zum Neustart</div>
<canvas id="gameCanvas" width="800" height="600"></canvas>
<script>
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");

const characters = {
  "Max Blaze": { x: 100, y: 300, color: "red", ability: "Punch", hp: 100 },
  "Torchbot": { x: 100, y: 300, color: "orange", ability: "Flame", hp: 100 },
  "Volt Girl": { x: 100, y: 300, color: "purple", ability: "Dash", hp: 100 },
  "Boomimp": { x: 100, y: 300, color: "green", ability: "Boom", hp: 100 }
};

let selected = "Max Blaze";
let bullets = [];
let enemies = [];
let bosses = [];
let phase = 1;
let isGameOver = false;

const shootCooldown = { up: 0, down: 0, left: 0, right: 0 };

function spawnEnemiesForPhase() {
  for (let i = 0; i < phase * 2; i++) {
    enemies.push({ x: 800 + Math.random() * 400, y: Math.random() * 550 + 25, radius: 20, speed: 1 + phase * 0.2, hp: 3 + Math.floor(phase / 2) });
  }
  bosses.push({ x: 800, y: 300, radius: 40, speed: 1 + phase * 0.3, hp: 20 + phase * 10 });
}

function drawCharacter(name, char) {
  ctx.fillStyle = char.color;
  ctx.beginPath();
  ctx.arc(char.x, char.y, 20, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = "white";
  ctx.fillText(name, char.x - 20, char.y - 30);
  ctx.fillText("HP: " + char.hp, char.x - 20, char.y + 35);
}

function drawEnemy(e) {
  ctx.fillStyle = "gray";
  ctx.beginPath();
  ctx.arc(e.x, e.y, e.radius, 0, Math.PI * 2);
  ctx.fill();
}

function drawBoss(b) {
  ctx.fillStyle = "darkred";
  ctx.beginPath();
  ctx.arc(b.x, b.y, b.radius, 0, Math.PI * 2);
  ctx.fill();
  ctx.fillStyle = "white";
  ctx.fillText("Boss HP: " + b.hp, b.x - 30, b.y - b.radius - 10);
}

function drawBullet(b) {
  ctx.fillStyle = "yellow";
  ctx.beginPath();
  ctx.arc(b.x, b.y, 5, 0, Math.PI * 2);
  ctx.fill();
}

document.addEventListener("keydown", e => {
  if (isGameOver) return;
  const char = characters[selected];
  if (e.key === "ArrowRight") char.x += 10;
  if (e.key === "ArrowLeft") char.x -= 10;
  if (e.key === "ArrowUp") char.y -= 10;
  if (e.key === "ArrowDown") char.y += 10;
  if (e.key === "1") selected = "Max Blaze";
  if (e.key === "2") selected = "Torchbot";
  if (e.key === "3") selected = "Volt Girl";
  if (e.key === "4") selected = "Boomimp";
  if (e.key === "w" && shootCooldown.up <= 0) {
    bullets.push({ x: char.x, y: char.y, dx: 0, dy: -5 });
    shootCooldown.up = 10;
  }
  if (e.key === "s" && shootCooldown.down <= 0) {
    bullets.push({ x: char.x, y: char.y, dx: 0, dy: 5 });
    shootCooldown.down = 10;
  }
  if (e.key === "a" && shootCooldown.left <= 0) {
    bullets.push({ x: char.x, y: char.y, dx: -5, dy: 0 });
    shootCooldown.left = 10;
  }
  if (e.key === "d" && shootCooldown.right <= 0) {
    bullets.push({ x: char.x, y: char.y, dx: 5, dy: 0 });
    shootCooldown.right = 10;
  }
});

function update() {
  const char = characters[selected];
  Object.keys(shootCooldown).forEach(key => shootCooldown[key]--);

  bullets.forEach((b, i) => {
    b.x += b.dx;
    b.y += b.dy;
    if (b.x < 0 || b.x > 800 || b.y < 0 || b.y > 600) bullets.splice(i, 1);
  });

  enemies.forEach((e, i) => {
    e.x -= e.speed;
    bullets.forEach((b, j) => {
      if (Math.hypot(b.x - e.x, b.y - e.y) < e.radius) {
        e.hp--;
        bullets.splice(j, 1);
        if (e.hp <= 0) enemies.splice(i, 1);
      }
    });
  });

  bosses.forEach((b, i) => {
    b.x -= b.speed;
    bullets.forEach((bul, j) => {
      if (Math.hypot(bul.x - b.x, bul.y - b.y) < b.radius) {
        b.hp--;
        bullets.splice(j, 1);
        if (b.hp <= 0) bosses.splice(i, 1);
      }
    });
  });

  if (enemies.length === 0 && bosses.length === 0 && phase <= 10) {
    phase++;
    if (phase <= 10) {
      spawnEnemiesForPhase();
    } else {
      isGameOver = true;
      document.getElementById("gameOver").style.display = "block";
    }
  }
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  drawCharacter(selected, characters[selected]);
  enemies.forEach(drawEnemy);
  bosses.forEach(drawBoss);
  bullets.forEach(drawBullet);
  update();
  if (!isGameOver) requestAnimationFrame(draw);
}

spawnEnemiesForPhase();
draw();
</script>
</body>
</html>
